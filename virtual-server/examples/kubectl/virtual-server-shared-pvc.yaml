apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: vs-shared-pvc
spec:
  accessModes:
  - ReadWriteMany
  storageClassName: shared-nvme-ord1
  volumeMode: Filesystem
  resources:
    requests:
      storage: 20Gi
---
apiVersion: virtualservers.coreweave.com/v1alpha1
kind: VirtualServer
metadata:
  name: vs-ubuntu2004-shared-pvc
spec:
  region: ORD1
  os:
    type: linux
  resources:
    gpu:
      type: Quadro_RTX_4000
      count: 1
    cpu:
      count: 3
    memory: 16Gi
  storage:
    root:
      size: 40Gi
      storageClassName: block-nvme-ord1
      source:
        pvc:
          namespace: vd-images
          name: ubuntu2004-docker-master-20210323-ord1
    filesystems:
      - name: shared-pvc
        spec:
          persistentVolumeClaim:
            claimName: vs-shared-pvc
  # Change user name and pasword
  # User is on the sudoer list
  users:
    - username: myuser
      password: password
  network:
    public: true
    tcp:
      ports:
        - 22
  initializeRunning: true
